[template name="Magic Spice v0.0.1"]
![Preview]([base_dir]/magic_spice.png)
This template elevates your prompts using techniques from Fooocus and elsewhere. It helps ensure high-quality images regardless of the simplicity of your prompt. **Some spices may yield NSFW terms due to GPT-2 prompt expansion.**

<details><summary>üìö Documentation</summary>

<details><summary>What is a "spice?"</summary>

A spice is a prompt template that uses a set of techniques to enhance the quality of the generated image. It can include anything from adding extra networks to using a negative prompt to using fluff terms.
</details>

<details><summary>Model compatibility</summary>

Spices are model-agnostic, meaning they are compatible with both Stable Diffusion 1.5 and SDXL checkpoints. Some settings such as the aspect ratio are automatically adjusted based on the architecture you're using.
</details>

<details><summary>Quality vs adherence</summary>

Optimizing for quality means that the model will try to generate the best possible image, even if it doesn't strictly adhere to the prompt. This can be useful for prompts that are too simple or too complex. However, if the spice strays too far from your intentions, try disabling GPT-2 prompt expansion and the use of negative prompts.
</details>

</details>
[/template]
[set subject _new _label="Subject" _info="Enter a prompt to enhance." _max_lines=20 _lines=3]Statue of God[/set]

[set style_preset _new _info="May download extra dependencies on first use." _ui="dropdown" _choices="none|{filelist '%BASE_DIR%/templates/common/presets/magic_spice/*.*' _basename _hide_ext}" _label="Choose Your Spice"]allspice_v2[/set]

[set aspect_ratio _new _ui="radio" _choices="‚ñ† Square|‚ÜïÔ∏è Portrait|‚ÜîÔ∏è Landscape|Custom"]‚ñ† Square[/set]

[wizard accordion _label="‚öôÔ∏è Advanced Settings"]
	[set inference_preset _new _info="Locks CFG scale, sampler method, etc. to recommended values" _label="Inference Preset" _ui="dropdown" _choices="none|{filelist '%BASE_DIR%/templates/common/presets/txt2img/*.*' _basename _hide_ext}"]restart_v1[/set]
	[set do_fluff _new _label="Use fluff terms" _ui="checkbox"]1[/set]
	[set do_gpt _new _label="Use GPT-2 prompt expansion" _ui="checkbox"]1[/set]
	[set do_networks _new _label="Use extra networks" _ui="checkbox"]1[/set]
	[set do_negatives _new _label="Use negative prompt" _ui="checkbox"]1[/set]
	[set do_autotone _new _label="Fix contrast issues" _ui="checkbox"]1[/set]
[/wizard]

[if "style_preset != 'none'"]
	[call "common/presets/magic_spice/{get style_preset}"]
[/if]
[else]
	[get subject]
[/else]


[if "inference_preset != 'none'"]
	[call "common/presets/txt2img/{get inference_preset}"]
[/if]

[if sd_base="sdxl"]
	[switch aspect_ratio]
		[case "‚ñ† Square"]
			[sets width=1024 height=1024]
		[/case]
		[case "‚ÜïÔ∏è Portrait"]
			[sets width=768 height=1344]
		[/case]
		[case "‚ÜîÔ∏è Landscape"]
			[sets width=1344 height=768]
		[/case]
	[/switch]
[/if][else]
	[switch aspect_ratio]
		[case "‚ñ† Square"]
			[sets width=512 height=512]
		[/case]
		[case "‚ÜïÔ∏è Portrait"]
			[sets width=512 height=768]
		[/case]
		[case "‚ÜîÔ∏è Landscape"]
			[sets width=768 height=512]
		[/case]
	[/switch]
[/else]

[if do_autotone]
	[after][autotone][/after]
[/if]